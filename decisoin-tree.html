<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
    crossorigin="anonymous">

  <title>My Tour!</title>
</head>

<body>
  <div class="container">
    <div>
      <button type="button" class="btn-lg btn-warning" onclick="myTreeInit()">Start Tour</button>
      <div id="root">
      </div>
    </div>

  </div>

  <script src="js/tree.js"></script>
  <script>
    var i = 0;
    var path = '';
    var found = false;
    var exception = false;
    var output = '';
    var buttonClicked = Array(16).fill(0);
    console.log("[] "+buttonClicked+" len "+buttonClicked.length);

    function callYes(callerParam) {
      var paramIndex = callerParam.substring(3);
      console.log("par idx "+paramIndex);
      buttonClicked[paramIndex]+=1;
      console.log("Yes Button clicked "+buttonClicked);
      if(buttonClicked[paramIndex]>1){
        alert('this button pressed twice '+buttonClicked[paramIndex]);
        buttonClicked = Array(16).fill(0);
        
        exception = true;
        var parentEl = document.getElementById("rootDiv");
        try {
          var el = document.getElementById(callerParam+"Div").nextSibling;
        while(el){
          parentEl.removeChild(el);
          el = el.nextSibling;
        }
        } catch (error) {
          console.log("msg: "+error);
        }
        
      }else{
        console.log("called with " + callerParam);
      var no = document.getElementById(callerParam + 'No');
      no.style.display = 'none'; //or none
      //no.style.visibility = 'hidden';
      
      
      i++;
      path += 'yes';

      switch (path) {
        case "yesyesyes":
          found=true;
          output='B';
          alert('B');
          break;
        case "nonoyes":
          found=true;
          output='E';
          alert('E');
          break;
        case "yesnoyesyes":
          found=true;
          output='C';
          alert('C');
          break;
        case "noyesyesyesyes":
          found=true;
          output='D';
          alert('D');
          break;
      }
      if(found){
        createDiv("root", "outputDiv");
        document.getElementById("outputDiv").innerHTML = "You reached here using " + path +" using value "+output;
        console.log("Button clicked "+buttonClicked);
        found = false;
        output = '';
        path = '';
      }else{
        var param = "\'lvl" + i + "\'";
        console.log("selected so far: " + path);
        console.log("param " + param);
        createDiv("rootDiv", "lvl" + (i) + "Div");
        createNode("lvl" + (i) + "Div", "Button", "lvl" + (i) + "Yes", "Yes", "btn-lg btn-warning", "callYes(" + param +")");
        createNode("lvl" + (i) + "Div", "Button", "lvl" + (i) + "No", "No", "btn-lg btn-danger", "callNo(" + param + ")");
      }
      }
      
    }
    function calculatoin(){

    }
    function callNo(callerParam) {
      var paramIndex = callerParam.substring(3);
      console.log("par idx "+paramIndex);
      buttonClicked[paramIndex]+=1;
      console.log("No Button clicked "+buttonClicked);
      if(buttonClicked[paramIndex]>1){
        alert('this button pressed twice '+buttonClicked[paramIndex]);
        buttonClicked = Array(16).fill(0);
        exception = true;
        var parentEl = document.getElementById("rootDiv");
        try {
          var el = document.getElementById(callerParam+"Div").nextSibling;
        while(el){
          parentEl.removeChild(el);
          el = el.nextSibling;
        }
        } catch (error) {
          console.log("msg: "+error);
        }
      }else{
        console.log("called with " + callerParam);
      var no = document.getElementById(callerParam + 'Yes');
      no.style.display = 'none'; //or
      //no.style.visibility = 'hidden';
      
      i++;
      path += 'no';
      switch (path) {
        case "nonono":
          found=true;
          output='A';
          alert('A');
          break;
        case "yesyesno":
          found=true;
          //output='B';
          alert('Not yet decided!');
          break;
        case "yesnono":
          found=true;
          //output='B';
          alert('Not yet decided!');
          break;
        case "noyesno":
          found=true;
          //output='B';
          alert('Not yet decided!');
          break;
        case "yesnoyesno":
          found=true;
          output='A';
          alert('A');
          break;
        case "noyesyesno":
          found=true;
          //output='B';
          alert('Not yet decided!');
          break;
        case "noyesyesyesno":
          found=true;
          output='A';
          alert('A');
          break;
      }
      if(found){
        createDiv("root", "outputDiv");
        document.getElementById("outputDiv").innerHTML = "You reached here using " + path +" using value "+output;
        console.log("Button clicked "+buttonClicked);
        found = false;
        output = '';
        path = '';
      }else{
        var param = "\'lvl" + i + "\'";
        console.log("param " + param);
        console.log("selected so far: " + path);
        createDiv("rootDiv", "lvl" + (i) + "Div");
        createNode("lvl" + (i) + "Div", "Button", "lvl" + (i) + "Yes", "Yes", "btn-lg btn-warning", "callYes(" + param +")");
        createNode("lvl" + (i) + "Div", "Button", "lvl" + (i) + "No", "No", "btn-lg btn-danger", "callNo(" + param + ")");
      }
      }
      
    }
  </script>

</body>

</html>